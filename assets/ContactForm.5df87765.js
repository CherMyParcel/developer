import{y as h,l as j,f as S,W as M,a7 as $,g as L,o as g,h as A,r as d,c as F,J as P,K as _,a as p,w as b,R as I,d as R,t as V}from"./app.1e160e88.js";import B from"./FormField.a479b088.js";import O from"./FormInput.85466d21.js";import H from"./FormSelect.616a6da6.js";import U from"./FormTextArea.8b231928.js";import{M as J}from"./MPButton.da6302bc.js";import K from"./Message.17a237f1.js";import{a as N}from"./index.6b6ac2a0.js";import{_ as E}from"./plugin-vue_export-helper.21dcd24c.js";import{u as T}from"./useTranslate.5e8f6385.js";import"./defaultInputClasses.e0f170d2.js";import"./Icon.f6721d38.js";import"./defineVariant.6257c1c1.js";import"./toArray.7df412a1.js";const q=()=>({sendEvent:(t,e)=>{var r;(r=window.dataLayer)==null||r.push({event:t,...e})}}),D=(t,e,r)=>{const a=T(),n=h(!1),l=h(),i=q();return{loading:n,onSubmit:async()=>{if(!n.value){if(e.value=[],!l.value){e.value.push({type:"error",message:a("errorCaptchaInvalid")});return}n.value=!0;try{const c=await fetch("aaa",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({...t.value,recaptchaToken:l.value})});if(!c.ok){(await c.json()).data.errors.messages.forEach(m=>{e.value.push({type:"error",message:a(m)})});return}e.value.push({type:"success",message:a("messageSubmitted")}),t.value=r,i.sendEvent("submit",{data:t.value})}catch(c){j(c,"message")&&e.value.push({type:"error",message:a(c.message)})}n.value=!1}},verify:c=>{e.value=[],l.value=c}}};function w(){return w=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},w.apply(this,arguments)}var W=function(){var e=!1,r=[],a=function(){if(!e){e=!0;for(var o=0,f=r.length;o<f;o++)r[o]()}},n=function(o){if(!e){r.push(o);return}o()},l={resolved:function(){return e},resolve:a,promise:{then:n}};return l},k=Object.prototype.hasOwnProperty;function Y(){var t=W();return{notify:function(){t.resolve()},wait:function(){return t.promise},render:function(r,a,n){this.wait().then(function(){n(window.grecaptcha.render(r,a))})},reset:function(r){typeof r!="undefined"&&(this.assertLoaded(),this.wait().then(function(){return window.grecaptcha.reset(r)}))},execute:function(r){typeof r!="undefined"&&(this.assertLoaded(),this.wait().then(function(){return window.grecaptcha.execute(r)}))},checkRecaptchaLoad:function(){k.call(window,"grecaptcha")&&k.call(window.grecaptcha,"render")&&this.notify()},assertLoaded:function(){if(!t.resolved())throw new Error("ReCAPTCHA has not been loaded")}}}var v=Y();typeof window!="undefined"&&(window.vueRecaptchaApiLoaded=v.notify);var z=S({name:"VueRecaptcha",props:{sitekey:{type:String,required:!0},theme:{type:String},badge:{type:String},type:{type:String},size:{type:String},tabindex:{type:String},loadRecaptchaScript:{type:Boolean,default:!0},recaptchaScriptId:{type:String,default:"__RECAPTCHA_SCRIPT"},recaptchaHost:{type:String,default:"www.google.com"},language:{type:String,default:""}},emits:["render","verify","expired","error"],setup:function(e,r){var a=r.slots,n=r.emit,l=h(null),i=h(null),o=function(m){n("verify",m)},f=function(){n("expired")},c=function(){n("error")};return M(function(){if(v.checkRecaptchaLoad(),e.loadRecaptchaScript&&!document.getElementById(e.recaptchaScriptId)){var u=document.createElement("script");u.id=e.recaptchaScriptId,u.src="https://"+e.recaptchaHost+"/recaptcha/api.js?onload=vueRecaptchaApiLoaded&render=explicit&hl="+e.language,u.async=!0,u.defer=!0,document.head.appendChild(u)}var m=w({},e,{callback:o,"expired-callback":f,"error-callback":c}),y=l.value,s=a.default?y.children[0]:y;v.render(s,m,function(C){i.value=C,n("render",C)})}),{root:l,widgetId:i,reset:function(){v.reset(i.value)},execute:function(){v.execute(i.value)}}},render:function(){var e=this.$slots.default,r;return typeof e=="function"?r=e():r=e,$("div",{ref:"root"},r)}});const G=S({name:"ReCaptcha",components:{VueRecaptcha:z},emits:["verify"],setup:()=>{const t=N();return{RECAPTCHA_SITE_KEY:"6Ldfn8cfAAAAAJ-131JCFn9skW7N3k-7B0UKuHBi",theme:L(()=>t.value?"dark":"light")}}});function x(t,e,r,a,n,l){const i=d("VueRecaptcha");return g(),A(i,{theme:t.theme,sitekey:t.RECAPTCHA_SITE_KEY,onVerify:e[0]||(e[0]=o=>t.$emit("verify",o))},null,8,["theme","sitekey"])}var Q=E(G,[["render",x],["__file","ReCaptcha.vue"]]);const X=S({name:"ContactForm",components:{Message:K,ReCaptcha:Q,FormField:B,FormTextArea:U,FormSelect:H,FormInput:O,MPButton:J},setup:()=>{const t={name:"",email:"",subject:"",message:""},e=h(t),r=h([]),a=T(),{loading:n,onSubmit:l,verify:i}=D(e,r,t);return{loading:n,messages:r,onSubmit:l,refs:e,translate:a,verify:i,subjects:["feature_request","integration_request","bug","partnership","security","other"].map(o=>({name:o,label:a(`contactForm.subject.${o}`)}))}}});function Z(t,e,r,a,n,l){const i=d("Message"),o=d("FormInput"),f=d("FormSelect"),c=d("FormTextArea"),u=d("ReCaptcha"),m=d("MPButton"),y=d("FormField");return g(),F("form",{class:"gap-3 grid",onSubmit:e[4]||(e[4]=I((...s)=>t.onSubmit&&t.onSubmit(...s),["prevent"]))},[(g(!0),F(P,null,_(t.messages,s=>(g(),A(i,{key:s,type:s.type},{default:b(()=>[R(V(s.message),1)]),_:2},1032,["type"]))),128)),p(o,{id:"name",modelValue:t.refs.name,"onUpdate:modelValue":e[0]||(e[0]=s=>t.refs.name=s),modelModifiers:{trim:!0},autocomplete:"name",label:t.translate("contactForm.name")},null,8,["modelValue","label"]),p(o,{id:"email",modelValue:t.refs.email,"onUpdate:modelValue":e[1]||(e[1]=s=>t.refs.email=s),modelModifiers:{trim:!0},type:"email",label:t.translate("contactForm.email")},null,8,["modelValue","label"]),p(f,{id:"subject",modelValue:t.refs.subject,"onUpdate:modelValue":e[2]||(e[2]=s=>t.refs.subject=s),modelModifiers:{trim:!0},options:t.subjects,"empty-option":"",label:t.translate("contactForm.subject")},null,8,["modelValue","options","label"]),p(c,{id:"message",modelValue:t.refs.message,"onUpdate:modelValue":e[3]||(e[3]=s=>t.refs.message=s),modelModifiers:{trim:!0},label:t.translate("contactForm.message")},null,8,["modelValue","label"]),p(y,null,{default:b(()=>[p(u,{class:"pb-3",onVerify:t.verify},null,8,["onVerify"]),p(m,{"aria-label":t.translate("submit"),disabled:t.loading,type:"submit"},{default:b(()=>[R(V(t.translate("submit")),1)]),_:1},8,["aria-label","disabled"])]),_:1})],32)}var fe=E(X,[["render",Z],["__file","ContactForm.vue"]]);export{fe as default};
