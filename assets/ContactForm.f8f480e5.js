import{f as S,x as d,V as T,a6 as E,g as $,o as y,h as A,r as c,c as C,F as M,G as _,b as m,w as b,O as P,n as I,d as V,t as R}from"./app.033e6678.js";import L from"./FormField.64b99a73.js";import B from"./FormInput.8bdef14f.js";import O from"./FormSelect.5f447dc9.js";import q from"./FormTextArea.c24111a6.js";import{M as H}from"./MPButton.c9ccbe1c.js";import x from"./Message.efa98e2b.js";import{a as U}from"./index.8ae6ef81.js";import{_ as j}from"./plugin-vue_export-helper.21dcd24c.js";import{u as N}from"./useTranslate.a9d20601.js";import"./defaultInputClasses.a793e972.js";import"./Icon.42a444fe.js";import"./defineVariant.6257c1c1.js";import"./toArray.7df412a1.js";function w(){return w=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},w.apply(this,arguments)}var J=function(){var e=!1,r=[],o=function(){if(!e){e=!0;for(var a=0,p=r.length;a<p;a++)r[a]()}},n=function(a){if(!e){r.push(a);return}a()},i={resolved:function(){return e},resolve:o,promise:{then:n}};return i},k=Object.prototype.hasOwnProperty;function K(){var t=J();return{notify:function(){t.resolve()},wait:function(){return t.promise},render:function(r,o,n){this.wait().then(function(){n(window.grecaptcha.render(r,o))})},reset:function(r){typeof r!="undefined"&&(this.assertLoaded(),this.wait().then(function(){return window.grecaptcha.reset(r)}))},execute:function(r){typeof r!="undefined"&&(this.assertLoaded(),this.wait().then(function(){return window.grecaptcha.execute(r)}))},checkRecaptchaLoad:function(){k.call(window,"grecaptcha")&&k.call(window.grecaptcha,"render")&&this.notify()},assertLoaded:function(){if(!t.resolved())throw new Error("ReCAPTCHA has not been loaded")}}}var v=K();typeof window!="undefined"&&(window.vueRecaptchaApiLoaded=v.notify);var z=S({name:"VueRecaptcha",props:{sitekey:{type:String,required:!0},theme:{type:String},badge:{type:String},type:{type:String},size:{type:String},tabindex:{type:String},loadRecaptchaScript:{type:Boolean,default:!0},recaptchaScriptId:{type:String,default:"__RECAPTCHA_SCRIPT"},recaptchaHost:{type:String,default:"www.google.com"},language:{type:String,default:""}},emits:["render","verify","expired","error"],setup:function(e,r){var o=r.slots,n=r.emit,i=d(null),u=d(null),a=function(h){n("verify",h)},p=function(){n("expired")},f=function(){n("error")};return T(function(){if(v.checkRecaptchaLoad(),e.loadRecaptchaScript&&!document.getElementById(e.recaptchaScriptId)){var l=document.createElement("script");l.id=e.recaptchaScriptId,l.src="https://"+e.recaptchaHost+"/recaptcha/api.js?onload=vueRecaptchaApiLoaded&render=explicit&hl="+e.language,l.async=!0,l.defer=!0,document.head.appendChild(l)}var h=w({},e,{callback:a,"expired-callback":p,"error-callback":f}),g=i.value,s=o.default?g.children[0]:g;v.render(s,h,function(F){u.value=F,n("render",F)})}),{root:i,widgetId:u,reset:function(){v.reset(u.value)},execute:function(){v.execute(u.value)}}},render:function(){var e=this.$slots.default,r;return typeof e=="function"?r=e():r=e,E("div",{ref:"root"},r)}});const D=S({name:"ReCaptcha",components:{VueRecaptcha:z},emits:["verify"],setup:()=>{const t=U();return{RECAPTCHA_SITE_KEY:"6Ldfn8cfAAAAAJ-131JCFn9skW7N3k-7B0UKuHBi",theme:$(()=>t.value?"dark":"light")}}});function Y(t,e,r,o,n,i){const u=c("VueRecaptcha");return y(),A(u,{theme:t.theme,sitekey:t.RECAPTCHA_SITE_KEY,onVerify:e[0]||(e[0]=a=>t.$emit("verify",a))},null,8,["theme","sitekey"])}var G=j(D,[["render",Y],["__file","ReCaptcha.vue"]]);const W=S({name:"ContactForm",components:{Message:x,ReCaptcha:G,FormField:L,FormTextArea:q,FormSelect:O,FormInput:B,MPButton:H},setup:()=>{const t={name:"",email:"",subject:"",message:""},e=d(t),r=d(),o=d(!1),n=d([]),i=N();return{refs:e,loading:o,translate:i,messages:n,onSubmit:async()=>{if(!o.value){if(n.value=[],!r.value){n.value.push({type:"error",message:i("errorCaptchaInvalid")});return}o.value=!0;try{const a=await fetch("https://vqthadq4nvo5i2cgvxpu3xw3zm0qxquc.lambda-url.eu-central-1.on.aws",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({...e.value,recaptchaToken:r.value})});if(!a.ok){(await a.json()).data.errors.messages.forEach(f=>{n.value.push({type:"error",message:i(f)})});return}n.value.push({type:"success",message:i("messageSubmitted")}),e.value=t}catch(a){I(a,"message")&&n.value.push({type:"error",message:i(a.message)})}o.value=!1}},verify:a=>{n.value=[],r.value=a},subjects:["feature_request","integration_request","bug","partnership","security","other"].map(a=>({name:a,label:i(`contactForm.subject.${a}`)}))}}});function Q(t,e,r,o,n,i){const u=c("Message"),a=c("FormInput"),p=c("FormSelect"),f=c("FormTextArea"),l=c("ReCaptcha"),h=c("MPButton"),g=c("FormField");return y(),C("form",{class:"gap-3 grid",onSubmit:e[4]||(e[4]=P((...s)=>t.onSubmit&&t.onSubmit(...s),["prevent"]))},[(y(!0),C(M,null,_(t.messages,s=>(y(),A(u,{key:s,type:s.type},{default:b(()=>[V(R(s.message),1)]),_:2},1032,["type"]))),128)),m(a,{id:"name",modelValue:t.refs.name,"onUpdate:modelValue":e[0]||(e[0]=s=>t.refs.name=s),modelModifiers:{trim:!0},autocomplete:"name",label:t.translate("contactForm.name")},null,8,["modelValue","label"]),m(a,{id:"email",modelValue:t.refs.email,"onUpdate:modelValue":e[1]||(e[1]=s=>t.refs.email=s),modelModifiers:{trim:!0},type:"email",label:t.translate("contactForm.email")},null,8,["modelValue","label"]),m(p,{id:"subject",modelValue:t.refs.subject,"onUpdate:modelValue":e[2]||(e[2]=s=>t.refs.subject=s),modelModifiers:{trim:!0},options:t.subjects,"empty-option":"",label:t.translate("contactForm.subject")},null,8,["modelValue","options","label"]),m(f,{id:"message",modelValue:t.refs.message,"onUpdate:modelValue":e[3]||(e[3]=s=>t.refs.message=s),modelModifiers:{trim:!0},label:t.translate("contactForm.message")},null,8,["modelValue","label"]),m(g,null,{default:b(()=>[m(l,{class:"pb-3",onVerify:t.verify},null,8,["onVerify"]),m(h,{disabled:t.loading,type:"submit"},{default:b(()=>[V(R(t.translate("submit")),1)]),_:1},8,["disabled"])]),_:1})],32)}var pe=j(W,[["render",Q],["__file","ContactForm.vue"]]);export{pe as default};
